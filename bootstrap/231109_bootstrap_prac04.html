<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log In Project</title>
</head>

<body>
    <label for="id">id : </label>
    <input type="text" name="id" id="id"><br>
    <label for="pw">pw : </label>
    <input type="password" name="pw" id="pw"><br>

    <button type="button" onclick="login()">로그인</button>
    <button type="button" onclick="checkLoggedin()">로그인 확인</button>
    <button type="button" onclick="logout()">로그아웃</button>
</body>

<script>
    // 웹 스토리지: 프론트에서 웹에 저장할 수 있는 저장소
    // key와 value의 값으로 이루어진 데이터를 저장할 수 있음

    // 세션 스토리지: 웹 페이지의 세션이 끝날 떄 저장된 데이터가 모두 사라짐
        // 탭이 다르거나 탭을 닫은 경우 데이터를 사용할 수 없음
    // 로컬 스토리지: 세션이 끝나더라도 데이터 유지
        // 만료 시간을 설정

    const inputId = document.querySelector('#id');
    const inputPw = document.querySelector('#pw');

    const id = 'asdf';
    const pw = '1234';

    // 로그인 코드
    const login = () => {
        // id와 pw가 입력된 경우
        if (inputId.value && inputPw.value) {
            console.log(`id: ${inputId.value}, pw: ${inputPw.value}`);
            // id 값이 저장된 id와 같은지 비교
            if (inputId.value === id) {
                // pw 값이 저장된 pw와 같은지 비교
                if (inputPw.value === pw) {
                    // id와 pw가 모두 일치한다면 로컬스토리지에 loggedIn이라는 키의 value를 true로 저장
                    // localStorage.setItem('key', 'value')
                    localStorage.setItem('loggedIn', true);
                    inputId.value = '';
                    inputPw.value = '';
                    alert('로그인에 성공했습니다');
                } else {
                    inputPw.value = '';
                    alert('비밀번호를 확인해주세요');
                }
            } else {
                inputId.value = '';
                inputPw.value = '';
                alert('아이디를 확인해주세요');
            }
        } else {
            alert('아이디와 비밀번호를 입력해주세요');
        }
    }

    // 로그인 확인
    const checkLoggedin = () => {
        console.log(localStorage.getItem('loggedIn'));
        // localStorage.getItem('키'): 해당 키의 값을 로컬스토리지에서 가져옴
        if (localStorage.getItem('loggedIn')) {
            alert('로그인 유저입니다');
        } else {
            alert('로그인되지 않은 유저입니다');
        }
    }

    // 로그아웃
    const logout = () => {
        // localStorage.removeItem('키'): 해당 키의 데이터를 로컬스토리지에서 삭제
        localStorage.removeItem('loggedIn');
        alert('로그아웃이 완료되었습니다');
    }
</script>

</html>